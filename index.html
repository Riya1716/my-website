<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vendor Registration</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    .sidebar {
      min-height: 100vh;
      background-color: #2c3e50;
      color: white;
      padding: 20px;
    }
    .sidebar h2 {
      margin-top: 0;
    }
    .sidebar ul {
      list-style-type: none;
      padding: 0;
    }
    .sidebar ul li a {
      color: white;
      text-decoration: none;
      display: block;
      padding: 8px;
    }
    form section {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>

<div class="container-fluid">
  <div class="row">
    <nav class="col-md-3 sidebar">
      <h2>Dashboard</h2>
      <ul class="nav flex-column">
        <li><a href="#">Register New Vendor</a></li>
        <li><a href="#">Fill Vendor Details</a></li>
        <li><a href="#">Upload Documents</a></li>
        <li><a href="#">Aadhar Verification</a></li>
        <li><a href="#">Print Acknowledgement</a></li>
      </ul>
    </nav>

    <main class="col-md-9 p-4 bg-light">
      <h1 class="mb-4">New Vendor Registration</h1>
      
      <form id="vendorForm">
        <section>
          <h2 class="h5 mb-3">Basic Details</h2>
          <div class="mb-3">
            <label class="form-label">Vendor Name</label>
            <input type="text" name="vendor_name" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Gender</label>
            <select class="form-select" name="gender">
              <option>Male</option>
              <option>Female</option>
              <option>Other</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Date of Birth</label>
            <input type="date" name="dob" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Age</label>
            <input type="number" name="age" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Mobile No</label>
            <input type="tel" name="mobile_no" class="form-control">
          </div>
        </section>

        <section>
          <h2 class="h5 mb-3">Residential Address</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Address Line 1</label>
              <input type="text" name="res_address_1" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">State</label>
              <input type="text" name="res_state" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">District</label>
              <input type="text" name="res_district" class="form-control">
            </div>
          </div>
        </section>

        <section>
          <h2 class="h5 mb-3">Present/Correspondence Address</h2>
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="sameAsResidential">
            <label class="form-check-label" for="sameAsResidential">Same as Residential</label>
          </div>
          <div class="mb-3">
            <label class="form-label">Address Line 1</label>
            <input type="text" name="pres_address_1" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Address Line 2</label>
            <input type="text" name="pres_address_2" class="form-control">
          </div>
        </section>

        <section>
          <h2 class="h5 mb-3">Permanent Address</h2>
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="sameAsPresent">
            <label class="form-check-label" for="sameAsPresent">Same as Present</label>
          </div>
          <div class="mb-3">
            <label class="form-label">Address Line 1</label>
            <input type="text" name="perm_address_1" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Address Line 2</label>
            <input type="text" name="perm_address_2" class="form-control">
          </div>
        </section>

        <section>
          <h2 class="h5 mb-3">Other Details</h2>
          <div class="mb-3">
            <label class="form-label">Type of ID Proof</label>
            <select class="form-select" name="id_proof_type" required>
              <option value="">--Select--</option>
              <option value="aadhaar">Aadhaar</option>
              <option value="voter">Voter ID</option>
              <option value="pan">PAN Card</option>
              <option value="dl">Driving License</option>
              <option value="passport">Passport</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">ID Proof Number</label>
            <input type="text" name="id_number" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Are you differently abled?</label>
            <select class="form-select" name="disability_status">
              <option value="">--Select--</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">If yes, specify disability type</label>
            <input type="text" name="disability_type" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Remarks</label>
            <textarea name="remarks" rows="3" class="form-control" placeholder="Enter any additional information"></textarea>
          </div>
        </section>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </main>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // --- Checkbox Logic for Addresses ---
  document.getElementById('sameAsResidential').addEventListener('change', function () {
    const resAddr1 = document.querySelector('input[name="res_address_1"]').value;
    const resState = document.querySelector('input[name="res_state"]').value;
    const resDistrict = document.querySelector('input[name="res_district"]').value;

    const presAddr1 = document.querySelector('input[name="pres_address_1"]');
    
    if (this.checked) {
      // Note: We only copy Address Line 1 as residential has no Line 2
      // and state/district fields aren't in the present address section.
      presAddr1.value = resAddr1;
    } else {
      presAddr1.value = '';
    }
  });

  document.getElementById('sameAsPresent').addEventListener('change', function () {
    const presAddr1 = document.querySelector('input[name="pres_address_1"]').value;
    const presAddr2 = document.querySelector('input[name="pres_address_2"]').value;
    
    const permAddr1 = document.querySelector('input[name="perm_address_1"]');
    const permAddr2 = document.querySelector('input[name="perm_address_2"]');

    if (this.checked) {
      permAddr1.value = presAddr1;
      permAddr2.value = presAddr2;
    } else {
      permAddr1.value = '';
      permAddr2.value = '';
    }
  });

  // --- Firebase Integration ---
  // Replace with your actual config from the Firebase console
  const firebaseConfig = {
    apiKey: "YOUR-API-KEY",
    authDomain: "your-project-id.firebaseapp.com",
    databaseURL: "https://your-project-id.firebaseio.com", // Make sure this is correct
    projectId: "vendor-registration-243c0",
    storageBucket: "your-project-id.appspot.com",
    messagingSenderId: "XXXX",
    appId: "1:1075651661055:web:cef459238a4384730e50ca"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const form = document.getElementById('vendorForm');

  // Handle form submit
  form.addEventListener('submit', function (e) {
    e.preventDefault();

    // --- Client-side validation ---
    const name = form.querySelector('input[name="vendor_name"]').value.trim();
    const age = form.querySelector('input[name="age"]').value.trim();
    const idProof = form.querySelector('select[name="id_proof_type"]').value;
    const idNumber = form.querySelector('input[name="id_number"]').value.trim();

    if (!name || !age || !idProof || !idNumber) {
      alert("Please fill all required fields: Vendor Name, Age, ID Proof Type, and ID Number.");
      return;
    }

    if (parseInt(age) < 18) {
      alert("You must be at least 18 years old to register.");
      return;
    }

    // --- Prepare and send data to Firebase ---
    const formData = new FormData(this);
    const data = Object.fromEntries(formData.entries());

    // Push data to the 'vendors' node in Firebase Realtime Database
    db.ref('vendors').push(data)
      .then(() => {
        alert("Form submitted successfully and saved to database!");
        form.reset(); // Clear the form after successful submission
      })
      .catch(err => {
        console.error("Error saving data: ", err);
        alert("An error occurred while saving the form: " + err.message);
      });
  });
</script>

</body>
</html>


